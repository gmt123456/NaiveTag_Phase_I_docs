# 众包标注系统迭代一需求规格说明文档

## 更新记录

| 修改人员 | 日期      | 变更原因         | 版本号 |
| -------- | --------- | ---------------- | ------ |
| 廖均达   | 2018-3-15 | 完成初稿         | 0.1    |
| 廖均达   | 2018-3-19 | 添加数据需求内容 | 0.2    |

[TOC]

## 引言

### 文档编写目的

本文档描述了迭代一众包标注系统的功能需求和非功能需求。开发小组的软件系统实现与验证工作都以此文档为依据。 除特殊说明之外，本文档所包含的需求都是高优先级需求。本说明书的内容可能在项目实施过程中发生变更，但是必须由项目小组成员发出变更请求，小组讨论，最终决定，建立持续有效的版本控制。

### 参考文献

1. 《软件工程与计算（卷二）》
2. 《软件工程与计算（卷三）》
3. 《软件需求规格说明目标（IEEE标准）》

## 项目概述

本项目旨在建立一个众包标注系统。该系统能够接受众包发起者的标注请求，并将请求分发给众包工人，工人在平台进行建议数据标注，系统评估并将标注结果反馈给众包发起者。同时，系统和众包发起者可以评估工人的完成质量并给予奖励；系统具有一个或者多个智能化模块。

### 项目范围说明

#### 项目目标

- 实现一个众包数据标注基础框架
- 能够加载所提供的数据
- 能够对数据进行标注
- 能够查看标注结果

### 项目约束

-  CON1：采用Java语言开发
- CON2：系统使用的是PC端的图形界面，评优必须采用web应用
- CON3：迭代I II不允许使用数据库
- CON4：项目建议采用分层模型进行开发
- CON5：项目后期会增加需求及开放式功能
- CON6：将工程行为尽可能地记录在Gitlab上
- CON7：每次迭代产品均必须附带部署说明文档

## 详细需求描述

### 功能需求

#### 标注数据

##### 特性描述

用户对数据进行标注时，可以对数据进行整体、局部、区域的标注

##### 刺激/响应序列

刺激：用户请求标注任务

响应：系统加载并显示待标注的数据

刺激：用户对数据进行方框标记

响应：系统显示标记的方框

刺激：用户在方框标记中对内容进行描述

响应：系统要在数据周围显示用户输入的描述

刺激：用户输入对整体数据的描述

响应：系统在数据周围显示用户输入的描述

刺激：用户请求提交此次标注结果

响应：系统显示此次数据标注的结果

刺激：用户请求标注下一份数据

响应：如果数据集中还留有数据则显示下一份数据，没有则提示用户此数据集已标注完成

刺激：用户对数据进行区域描边

响应：系统对被描边区域进行变色显示

刺激：用户对描边区域进行描述

响应：系统在描边区域周围显示用户的描述

刺激：用户请求取消当前标注任务

响应：系统关闭当前任务

刺激：用户请求删除当前标注

响应：系统数据当前的标注内容进行清空

##### 相关功能需求

| 编号                      | 需求描述                                                     |
| ------------------------- | ------------------------------------------------------------ |
| Tag.Input                 | 系统应该允许用户在进行数据标注的过程中使用鼠标、键盘进行输入 |
| Tag.Input.Draw            | 系统应该允许用户在图上进行标记                               |
| Tag.Input.Clear           | 用户请求清空当前的标注信息，系统清空所有标注信息（包括标记、描述） |
| Tag.Input.Draw.Square     | 用户在为数据进行方框标注时，系统要为用户提供方框标注工具     |
| Tag.Input.Draw.Stroke     | 用户在为数据进行区域标注时，系统要为用户提供描边工具         |
| Tag.Input.Describe.Total  | 系统应该允许用户对整个数据进行描述                           |
| Tag.Input.Describe.Stroke | 系统要允许用户对所描区域中的内容进行描述                     |
| Tag.Input.Describe.Square | 系统要允许用户对所标方框中的内容进行描述                     |
| Tag.Data.Load             | 当用户请求数据标注任务时，系统要能够加载待标注的数据并展示   |
| Tag.Data.Next             | 当用户点击下一份数据时，如果数据集中还有剩余的数据，则系统将显示下一份数据，否则系统将提示用户没有剩余的待标注数据 |
| Tag.Commit                | 当用户标注完一份数据时，系统存储用户标记的信息（参见Tag.Update.Data）以及更新日志中用户此次的标注行为（参见Tag.Update.Log），然后显示用户此次的标注结果 |
| Tag.Commit.Done           | 当用户标记完数据集中所有的数据时，系统提示用户数据已经标注完成 |
| Tag.Commit.Incomplete     | 当用户标注未完成（进行了区域标记但是所描边没有围成一个区域；整体、方框或区域缺少对应的描述）就点击提交时，系统将提示用户标注未完成 |
| Tag.Update.Log            | 系统记录并更新用户此次标注行为的信息（消耗时间、数据来源、数据类型） |
| Tag.Update.Data           | 系统记录并存储对此数据的标注信息                             |
| Tag.Show.Square           | 当用户完成对数据的方框标记后，系统在数据中对应的地方显示该方框 |
| Tag.Show.Stroke           | 当用户完成对数据的区域标记后，系统在数据中该区域对应的地方进行变色显示 |
| Tag.Close                 | 用户请求取消当前标注任务，系统要退出当前标注任务             |

#### 查看历史标注结果

##### 特性描述

用户可以对已经标注过的数据进行查看和修改

##### 刺激/响应序列

刺激：用户请求查看历史标注信息

响应：系统展示用户已经标注过的数据

刺激：用户选择具体的数据进行查看

响应：系统单独展示该数据（用户标注后的版本）

刺激：用户选择数据进行修改

响应：系统加载该数据等待用户修改

刺激：用户请求保存修改

响应：系统显示保存结果

##### 相关功能需求

| 编号                   | 需求描述                                                     |
| ---------------------- | ------------------------------------------------------------ |
| TagHistory.Data.Load   | 当用户请求查看标注过的数据时，系统要能够加载这些数据并展示   |
| TagHistory.Data.Show   | 当用户选择具体的数据进行查看时，系统要能够显示这份数据（包括用户的标注信息） |
| TagHistory.Data.Modify | 系统要允许用户修改标注的结果                                 |
| TagHistory.Update.Data | 当用户修改完成请求提交时，系统要更新标注的信息               |
| TagHistory.Update.Log  | 当用户修改完成且保存成功时，系统要记录用户此次的操作信息（包括时间，操作人账号，操作的数据目标） |

### 数据需求

#### 数据定义

**DR2**：数据集中的每份数据的分辨率应该应该一致

**DR1**：进行标注的数据集需要满足以下要求

- 数据集必须以zip压缩文件形式上传。
- 要求zip文件根目录下：
  - 一个名为data的文件夹，其中放置所有图片。
  - 一个task.json文件，描述任务形式。

**task.Json 文件格式**

1. 对图片整体标问题

```json
{
  "task-type": 100,
  "classes": ["name1", "name2", ...],
  "description": "这是任务描述"
}
```

2. 对图片整体注问题

```Json
{
  "task-type": 101,
  "description": "这是任务描述"
}
```

3. 对图片单框标问题

```json
{
  "task-type": 200,
  "classes": ["name1", "name2", ...],
  "description": "这是任务描述"
}
```

4. 对图片单框注问题

```json
{
  "task-type": 201,
  "description": "这是任务描述"
}
```

5. 对图片进行多框标问题

```json
{
  "task-type": 300,
  "classes": ["name1", "name2", ...],
  "description": "这是任务描述"
}
```

6. 对图片多框注问题

```json
{
  "task-type": 301,
  "description": "这是任务描述"
}
```

7. 对图片进行边界标

```json
{
  "task-type": 400,
  "description": "这是任务描述"
}
```

8. 对图片进行边界标并注

```json
{
  "task-type": 401,
  "description": "这是任务描述"
}
```
**DR3**：系统要记录用户的数据标注信息知道任务发布者回收任务